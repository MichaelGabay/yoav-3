# תרגילים - שיעור 4 (10.02)
## פונקציות נומריות ואגריגציות בפוסטגר

מסד הנתונים: **Northwind**

---

## תרגיל 1
חשב את הממוצע של מחירי המוצרים (`unit_price`) מהטבלה `products`. הצג את התוצאה עם כינוי `avg_price`.

---

## תרגיל 2
מהטבלה `order_details`, חשב את סכום הכמות (`quantity`) הכוללת שנמכרה. הצג את התוצאה עם כינוי `total_quantity`.

---

## תרגיל 3
מהטבלה `products`, מצא את המחיר הנמוך ביותר (`unit_price`) ואת המחיר הגבוה ביותר. הצג את שתי התוצאות עם כינויים `min_price` ו-`max_price`.

---

## תרגיל 4
ספור כמה מוצרים יש בסך הכל בטבלה `products`. הצג את התוצאה עם כינוי `total_products`.

---

## תרגיל 5
מהטבלה `products`, חשב את ממוצע המחיר (`unit_price`) רק למוצרים פעילים (`discontinued = 0`). הצג את התוצאה עם כינוי `avg_price_active`.

---

## תרגיל 6
מהטבלה `order_details`, חשב את סכום הערך הכולל: `quantity * unit_price * (1 - discount)`. הצג את התוצאה עם כינוי `total_revenue`.

---

## תרגיל 7
מהטבלה `customers`, ספור כמה לקוחות יש במדינה `'Germany'`. הצג את התוצאה עם כינוי `german_customers`.

---

## תרגיל 8
מהטבלה `products`, חשב את ממוצע המחיר (`unit_price`) למוצרים שמחירם גדול מ-20. הצג את התוצאה עם כינוי `avg_price_above_20`.

---

## תרגיל 9
מהטבלה `order_details`, חשב את סכום הכמות (`quantity`) הכוללת רק למוצרים שהכמות שלהם גדולה מ-10. הצג את התוצאה עם כינוי `total_quantity_high`.

---

## תרגיל 10
מהטבלה `products`, ספור כמה מוצרים שונים יש (ערכים ייחודיים ב-`product_id`). הצג את התוצאה עם כינוי `unique_products`.

---

## פתרונות

<details>
<summary>לחץ כדי לראות פתרונות</summary>

### פתרון תרגיל 1:
```sql
SELECT AVG(unit_price) AS avg_price
FROM products;
```

### פתרון תרגיל 2:
```sql
SELECT SUM(quantity) AS total_quantity
FROM order_details;
```

### פתרון תרגיל 3:
```sql
SELECT MIN(unit_price) AS min_price, MAX(unit_price) AS max_price
FROM products;
```

### פתרון תרגיל 4:
```sql
SELECT COUNT(*) AS total_products
FROM products;
```

### פתרון תרגיל 5:
```sql
SELECT AVG(unit_price) AS avg_price_active
FROM products
WHERE discontinued = 0;
```

### פתרון תרגיל 6:
```sql
SELECT SUM(quantity * unit_price * (1 - discount)) AS total_revenue
FROM order_details;
```

### פתרון תרגיל 7:
```sql
SELECT COUNT(*) AS german_customers
FROM customers
WHERE country = 'Germany';
```

### פתרון תרגיל 8:
```sql
SELECT AVG(unit_price) AS avg_price_above_20
FROM products
WHERE unit_price > 20;
```

### פתרון תרגיל 9:
```sql
SELECT SUM(quantity) AS total_quantity_high
FROM order_details
WHERE quantity > 10;
```

### פתרון תרגיל 10:
```sql
SELECT COUNT(DISTINCT product_id) AS unique_products
FROM products;
```

</details>
